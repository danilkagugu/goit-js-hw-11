{"version":3,"file":"commonHelpers.js","sources":["../src/js/search-img.js"],"sourcesContent":["// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst searchForm = document.querySelector('.js-search-form');\nconst ulEl = document.querySelector('.list-photo');\nconst loader = document.querySelector('.loader');\n\nsearchForm.addEventListener('submit', handleSearch);\n\nfunction handleSearch(event) {\n  event.preventDefault();\n  getLoader();\n  ulEl.innerHTML = '';\n\n  const form = event.currentTarget;\n  const query = form.elements.query.value;\n\n  setTimeout(() => {\n    searchPhoto(query)\n      .then(markupPhoto)\n      .then(data => {\n        if (data.hits.length <= 0) {\n          iziToast.error({\n            title: 'Error',\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n          });\n        }\n      })\n      .catch(onFetchError)\n      .finally(() => form.reset());\n  }, 1000);\n}\n\nfunction searchPhoto(value) {\n  const BAZE_URL = 'https://pixabay.com/api';\n  const API_KEY = '41849458-2d98265cf06659a45ba73a30c';\n  const url = `${BAZE_URL}/?key=${API_KEY}&q=${value}&image_type=photo&orientation=horizontal&safesearch=true`;\n  return fetch(url).then(resp => {\n    if (!resp.ok || value === '') {\n      throw new Error(resp.statusText);\n    }\n\n    return resp.json();\n  });\n}\n\nfunction onFetchError(error) {\n  console.error(error);\n\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n}\n\nfunction markupPhoto({ hits }) {\n  const markup = hits\n    .map(\n      hits => `<li class=\"gallery-item\">\n  \n  <a class=\"gallery-link\" href=\"${hits.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${hits.webformatURL}\"\n      data-source=\"${hits.imoriginal}\"\n      alt=\"${hits.tags}\"\n    />\n  </a>\n  <ul class=\"img-list\">\n  <li class=\"img-info\">\n   <p class=\"img-text\">Likes: <br><span>${hits.likes}</span></p>\n   <p class=\"img-text\">Views: <br><span>${hits.views}</span></p>\n   <p class=\"img-text\">Comment: <br><span>${hits.comments}</span></p>\n   <p class=\"img-text\">Downloads: <br><span>${hits.downloads}</span></p>\n   </li>\n   </ul>\n\n</li>`\n    )\n    .join('');\n\n  ulEl.innerHTML = markup;\n  modalLightboxGallery.refresh();\n}\n\nconst modalLightboxGallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction getLoader() {\n  loader.style.display = 'inline-block';\n  setTimeout(() => {\n    loader.style.display = 'none';\n  }, 1000);\n}\n"],"names":["searchForm","ulEl","loader","handleSearch","event","getLoader","form","query","searchPhoto","markupPhoto","data","iziToast","onFetchError","value","url","resp","error","hits","markup","modalLightboxGallery","SimpleLightbox"],"mappings":"6vBASA,MAAMA,EAAa,SAAS,cAAc,iBAAiB,EACrDC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAE/CF,EAAW,iBAAiB,SAAUG,CAAY,EAElD,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBC,IACAJ,EAAK,UAAY,GAEjB,MAAMK,EAAOF,EAAM,cACbG,EAAQD,EAAK,SAAS,MAAM,MAElC,WAAW,IAAM,CACfE,EAAYD,CAAK,EACd,KAAKE,CAAW,EAChB,KAAKC,GAAQ,CACRA,EAAK,KAAK,QAAU,GACtBC,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACd,CAAW,CAEX,CAAO,EACA,MAAMC,CAAY,EAClB,QAAQ,IAAMN,EAAK,MAAK,CAAE,CAC9B,EAAE,GAAI,CACT,CAEA,SAASE,EAAYK,EAAO,CAG1B,MAAMC,EAAM,qEAAiCD,4DAC7C,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAQ,CAC7B,GAAI,CAACA,EAAK,IAAMF,IAAU,GACxB,MAAM,IAAI,MAAME,EAAK,UAAU,EAGjC,OAAOA,EAAK,MAChB,CAAG,CACH,CAEA,SAASH,EAAaI,EAAO,CAC3B,QAAQ,MAAMA,CAAK,EAEnBL,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACN,CAAG,CACH,CAEA,SAASF,EAAY,CAAE,KAAAQ,GAAQ,CAC7B,MAAMC,EAASD,EACZ,IACCA,GAAQ;AAAA;AAAA,kCAEoBA,EAAK;AAAA;AAAA;AAAA,aAG1BA,EAAK;AAAA,qBACGA,EAAK;AAAA,aACbA,EAAK;AAAA;AAAA;AAAA;AAAA;AAAA,0CAKwBA,EAAK;AAAA,0CACLA,EAAK;AAAA,4CACHA,EAAK;AAAA,8CACHA,EAAK;AAAA;AAAA;AAAA;AAAA,MAK9C,EACA,KAAK,EAAE,EAEVhB,EAAK,UAAYiB,EACjBC,EAAqB,QAAO,CAC9B,CAEA,MAAMA,EAAuB,IAAIC,EAAe,aAAc,CAC5D,aAAc,MACd,aAAc,GAChB,CAAC,EAED,SAASf,GAAY,CACnBH,EAAO,MAAM,QAAU,eACvB,WAAW,IAAM,CACfA,EAAO,MAAM,QAAU,MACxB,EAAE,GAAI,CACT"}